(()=>{function m(e){return e&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function p(e){return e}function h(e,r){r=r||{};let y=r.delimiter||".",u=r.maxDepth,j=r.transformKey||p,b={};function d(f,O,s){s=s||1,Object.keys(f).forEach(function(n){let t=f[n],c=r.safe&&Array.isArray(t),o=Object.prototype.toString.call(t),i=m(t),a=o==="[object Object]"||o==="[object Array]",l=O?O+y+j(n):j(n);if(!c&&!i&&a&&Object.keys(t).length&&(!r.maxDepth||s<u))return d(t,l,s+1);b[l]=t})}return d(e),b}function A(e,r){r=r||{};let y=r.delimiter||".",u=r.overwrite||!1,j=r.transformKey||p,b={};if(m(e)||Object.prototype.toString.call(e)!=="[object Object]")return e;function f(n){let t=Number(n);return isNaN(t)||n.indexOf(".")!==-1||r.object?n:t}function O(n,t,c){return Object.keys(c).reduce(function(o,i){return o[n+y+i]=c[i],o},t)}function s(n){let t=Object.prototype.toString.call(n),c=t==="[object Array]",o=t==="[object Object]";if(n){if(c)return!n.length;if(o)return!Object.keys(n).length}else return!0}return e=Object.keys(e).reduce(function(n,t){let c=Object.prototype.toString.call(e[t]);return!(c==="[object Object]"||c==="[object Array]")||s(e[t])?(n[t]=e[t],n):O(t,n,h(e[t],r))},{}),Object.keys(e).forEach(function(n){let t=n.split(y).map(j),c=f(t.shift()),o=f(t[0]),i=b;for(;o!==void 0;){if(c==="__proto__")return;let a=Object.prototype.toString.call(i[c]),l=a==="[object Object]"||a==="[object Array]";if(!u&&!l&&typeof i[c]<"u")return;(u&&!l||!u&&i[c]==null)&&(i[c]=typeof o=="number"&&!r.object?[]:{}),i=i[c],t.length>0&&(c=f(t.shift()),o=f(t[0]))}i[c]=A(e[n],r)}),b}})();
